{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Course</title>

    <link rel="stylesheet" href="{% static 'css/add_course.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <script>
        const BASE_URL = "/accounts/instructor";
        const COURSE_ID = "{{ course_id }}";
        const PRELOAD = {{ preload|safe }};
    </script>

<style>

.topbar {
    background: white;
    padding: 12px 25px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.topbar-title {
    font-size: 26px;
    font-weight: bold;
    text-decoration: none;
    color: #222;
}

#topRow {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 18px;
    margin-top: 30px;
}



.builder-card {
    width: 180px;
    height: 160px;
    background: #ffffff;
    border-radius: 18px;
    border: 3px dashed #dcdcdc;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    transition: 0.25s ease;
    cursor: grab;
}

.builder-card:hover {
    transform: scale(1.05);
}

#dropZone {
    margin-bottom: 30px;   
}


.card-title {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 8px;
}


.module-card { border-color: #6aa9ff !important; }
.quiz-card { border-color: #ffcf7d !important; }
.assignment-card { border-color: #7ee6a0 !important; }
.liveclass-card { border-color: #ff8fba !important; }

.card-actions {
    position: absolute;
    bottom: 12px;
    display: flex;
    gap: 10px;
}

.open-module-btn {
    background: #4caf50;
    color: white;
    border: none;
    padding: 5px 12px;
    font-size: 13px;
    border-radius: 6px;
}

.delete-module-btn {
    background: #ff4d4d;
    color: white;
    border: none;
    padding: 5px 10px;
    font-size: 13px;
    border-radius: 6px;
}

.drop-zone {
    width: 180px;
    height: 160px;
    border-radius: 18px;
    border: 3px dashed #bfc7e6;
    background: #eef2ff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px;
    font-weight: bold;
    color: #5b6cff;
    cursor: pointer;
    transition: 0.25s ease;
}

.drop-zone:hover {
    transform: scale(1.08);
    border-color: #5167ff;
    color: #5167ff;
}

</style>

</head>


<body class="bg-light">


<div class="topbar">
    <a href="{% url 'instructor_dashboard' %}" class="topbar-title">Bildung</a>

    <div class="dropdown">
        <button class="btn rounded-circle shadow"
                style="background:#666;color:white;width:45px;height:45px;"
                data-bs-toggle="dropdown">
            {{ request.user.username|first|upper }}
        </button>

        <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="{% url 'instructor_profile_view' %}">Profile</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:add_course' %}">Create New Course</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:students_list' %}">My Students</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:calendar_view' %}">My Schedules</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor_notifications' %}">Notifications</a></li>
                <li><a class="dropdown-item" href="#">Earnings & Payments</a></li>
                <li><a class="dropdown-item" href="#">Help & Support</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor_account_settings' %}">Account Settings</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="{% url 'logout_view' %}">Logout</a></li>
        </ul>
    </div>
</div>


<div class="paper">

    <h1 class="title">CREATE COURSE</h1>

    <label class="label">Course Title</label>
    <input id="courseTitle" class="input-box" value="{{ course_title }}">

    <label class="label">Description</label>
    <textarea id="courseDescription" class="input-box" style="height:80px;">{{ course_description }}</textarea>

    <label class="label">Price (â‚¹)</label>
    <input id="coursePrice" type="number" class="input-box" value="{{ course_price }}">

    <label class="label">Category</label>
    <select id="courseCategory" class="input-box">
    <option value="" disabled selected>Select Category</option>
        <option value="business" {% if course_category == 'business' %}selected{% endif %}>Business</option>
        <option value="design" {% if course_category == 'design' %}selected{% endif %}>Design</option>
        <option value="music" {% if course_category == 'music' %}selected{% endif %}>Music</option>
        <option value="programming" {% if course_category == 'programming' %}selected{% endif %}>Programming</option>
        <option value="others" {% if course_category == 'others' %}selected{% endif %}>Others</option>
    </select>

    <hr class="divider">

    <h1 class="title">MODULE BUILDER</h1>

    <div id="topRow"></div>

    <div class="bottom-area">

        <div class="drag-row">
            <div class="draggable-btn module-btn" draggable="true" data-type="Module">Module</div>
            <div class="draggable-btn quiz-btn" draggable="true" data-type="Quiz">Quiz</div>
            <div class="draggable-btn assignment-btn" draggable="true" data-type="Assignment">Assignment</div>
            <div class="draggable-btn liveclass-btn" draggable="true" data-type="Live Class">Live Class</div>
        </div>

        <div class="actions">
            <button class="save-main" onclick="saveCourse()">Save Course</button>
            <button class="publish-main" onclick="publishCourse()">Publish</button>
        </div>

        <div class="note">ðŸ’¡ Drag items onto the + box to add them</div>
    </div>

</div>

<script src="{% static 'js/add_course.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
