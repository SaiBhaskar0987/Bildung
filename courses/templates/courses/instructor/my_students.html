<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My students</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="d-flex justify-content-between align-items-center p-3 bg-white shadow-sm">
        <a href="{% url 'instructor:instructor_dashboard' %}" class="text-decoration-none text-dark">
            <h3 class="m-0 fw-bold">Bildung</h3>
        </a>

        <div class="dropdown">
            <button class="btn rounded-circle shadow"
                style="background:gray;color:white;width:45px;height:45px;" type="button"
                data-bs-toggle="dropdown">
                {{ request.user.username|first|upper }}
            </button>

            <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="{% url 'profile_view' %}">Profile</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:add_course' %}">Create New Course</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:my_activity' %}">My Activity</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:calendar_view' %}">My Schedules</a></li>
                <li><a class="dropdown-item" href="{% url 'instructor:my_students' %}">My Students</a></li>
                <li><a class="dropdown-item" href="#">Notifications</a></li>
                <li><a class="dropdown-item" href="#">Earnings & Payments</a></li>
                <li><a class="dropdown-item" href="#">Help & Support</a></li>
                <li><a class="dropdown-item" href="#">Account Settings</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="{% url 'logout_view' %}">Logout</a></li>
            </ul>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container py-5">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-dark">My Students</h2>
        </div>

        {% if students_data %}
        <div class="row g-4">

            {% for s in students_data %}
            <div class="col-md-4">
                <div class="card shadow-sm border-0 rounded-4">
                    <div class="card-body">

                        <h5 class="fw-bold mb-1">
                            <a href="{% url 'instructor:view_student_profile' s.student.id %}"
                                class="text-decoration-none text-dark">
                                {{ s.student.get_full_name|default:s.student.username }}
                            </a>
                        </h5>

                        <p class="text-muted small mb-2">{{ s.student.email }}</p>

                        <hr>

                        <h6 class="text-muted small mb-2">Enrolled Courses:</h6>

                        <ul class="list-unstyled small">

                            {% for course in s.courses %}
                            <li class="mb-3">
                                ðŸŽ“ <strong>{{ course.title }}</strong>

                                <div class="mt-1">
                                    <div class="progress" style="height: 8px; border-radius: 5px;">
                                        <div class="progress-bar 
                                            {% if course.progress == 100 %}bg-success
                                            {% elif course.progress >= 50 %}bg-info
                                            {% else %}bg-warning{% endif %}"
                                            style="width: {{ course.progress }}%">
                                        </div>
                                    </div>
                                    <small class="text-muted">{{ course.progress }}% complete</small>
                                </div>
                            </li>

                            {% empty %}
                            <li class="text-muted">No courses enrolled</li>
                            {% endfor %}
                        </ul>

                    </div>
                </div>
            </div>
            {% endfor %}

        </div>

        {% else %}
        <div class="alert alert-info text-center rounded-3 shadow-sm">
            <h5>No Students Found</h5>
            <p class="mb-0">No one has enrolled in your courses yet.</p>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>
